<div class="container at-glance-promo-page-header promo-page-header">
	<div class="row-fluid h1Title widgetsPage">
        {% include themes/twitter/widgets_and_apps/drop-down.html %}
		<div class="span12">
			<h1>
				<div>
					<span>{{ page.title }}</span>
				</div>
			</h1>
		</div>	
		<span id="h1Title">{{ page.title_parent }}</span>	
		<span class="arrow">&nbsp;</span>	
	</div>
</div>

<div>
	<div class="wrap-container promo-section1 row-fluid at-glance-promo-section">
        <div class="container">
            <div class="span6">
                <h2 style="padding-top: 0">5 INFORMATION SECTIONS</h2>
                <div class="sub-header">to choose from. You have full control of which categories you want to show to your customers!</div>
                <div class="at-glance-slider-nav">
                    <ul>
                        <li class="rating btn-glance-selector selected"><a title="" href="javascript:void(0)" >Rating</a></li>
                        <li class="says btn-glance-selector"><a title="" href="javascript:void(0)" >Edmunds says</a></li>
                        <li class="reviews btn-glance-selector"><a title="" href="javascript:void(0)" >Consumer Reviews</a></li>
                        <li class="cost btn-glance-selector"><a title="" href="javascript:void(0)" >True Cost to Own</a></li>
                        <li class="photos btn-glance-selector"><a title="" href="javascript:void(0)" >Photos</a></li>
                    </ul>
                </div>
                <div class="twitter">
                    <a href="https://twitter.com/EdmundsAPI" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @EdmundsAPI</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                    <p>More sections will be added soon!<br>to be the first to know when that happens.</p>
                </div>

            </div>
            <div class="span6">
                <div class="screen-bgnd rating">&nbsp;</div>
            </div>
        </div>
    </div>
    <div class="wrap-container at-glance-promo-section2 promo-section2 row-fluid sectiobSliderGlance">
        <div class="span6">
            <div class="clearfix wrapperSliderGlance">


                <div class="navig">
                    <ul>
                        <li id="downSlide" class="arr" data-number="1">Prev</li>
                        <li class="pointSlider slidePoint1" data-number="1">1</li>
                        <li class="pointSlider slidePoint2" data-number="2">2</li>
                        <li id="upSlide" class="arr" data-number="2">Next</li>
                    </ul>
                </div>
                <div class="sliderGlance">
                    <ul>
                        <li class="slide1" data-slide="1"></li>
                        <li class="slide2" data-slide="2"></li>
                    </ul>
                </div>

                <div class="markers">

                    <span data-num="1" class="markerConf mark1">&nbsp;</span>
                    <span data-num="2" class="markerConf mark2">&nbsp;</span>
                    <span data-num="3" class="markerConf mark3">&nbsp;</span>


                    <span data-slide="1" data-num="1" class="tips tip1" style="top: 56px">API Key</span>
                    <span data-slide="1" data-num="2" class="tips tip2" style="top: 121px">Zip Code</span>
                    <span data-slide="1" data-num="3" class="tips tip3" style="top: 193px">The widget works by passing the car's make, model, year to it programmatically. The style selected is the default base style</span>


                    <span data-slide="2" data-num="1" class="tips tip1">Ability to choose the tabs with different information to include in the widget. You can have one tab or all five. It's up to you.</span>
                    <span data-slide="2" data-num="2" class="tips tip2">Widget Width</span>
                </div>


            </div>
            <span class="inrustrSliderGlance">click on markers to get more info</span>
        </div>
        <div class="span6" style="color: #fff">
            <h2>CUSTOMIZE WIDGET</h2>
            <p>Make the widget serve the data you need</p>

            <h5>Select option from:</h5>
            <ul>
                <li>120 most popular makes on US market</li>
                <li>5 tabs: Rating, Edmunds says, Consumer Reviews, TCO, Photos</li>
                <li>Configure the width of your widget</li>
            </ul>
        </div>
    </div>
    <div class="wrap-container promo-section3 at-glance-promo-section3">
        <div class="wrap-container sectionMobileBrowsers">
            <div class="h2Header">
                <h2>ALL MODERN MOBILE BROWSERS ARE SUPPORTED</h2>
                <div class="logo-bgnd">&nbsp;</div>
            </div>

            <p>You can easily render the widget on mobile devices</p>
            <div class="device-bgnd">&nbsp;</div>

        </div>
    </div>
</div>

<div class="wrap-container footer-section fixed">
	<div class="container">
		<span>It's as simple as copy and paste</span><div class="footer-line">&nbsp;</div>
		<a href="{{ PATH }}/widgets_and_apps/edmunds_at_a_glance_setup.html" class="standart-btn">GET A WIDGET!</a><div class="footer-line">&nbsp;</div>
		<span>Copy the code and paste it in your page's HTML</span>
		<div class="quick-start-TMV">
			<a href="{{ PATH }}/widgets_and_apps/edmunds_at_a_glance_setup.html" class="quick-start-header">Quick Start<span>View how it works</span></a>
			
		</div>
	</div>
</div>
<script type="text/javascript">
	$(function() {
	    var footerHeight = $('.footerLayout').height(),
	       	footer = $('.footerLayout'),
	   		fixedPanel = $('.footer-section'),
	   		height;

	  	fixedPanel.removeClass('fixed');
	  	height = $(document).height();	  	
	  	console.log('document height: ' + height);
	  	console.log('window height: ' + $(window).height());
	  	if((height - $(window).height()) > footerHeight) {
	  		fixedPanel.addClass('fixed');
	  	}

	  	$(window).scroll(function() {
	   		var scrollBottom = height - ($(window).scrollTop() + $(window).height());
	   		if(scrollBottom > footerHeight) {
	    		fixedPanel.addClass('fixed');
	    		footer.addClass('hide');
			}
			else {
	    		fixedPanel.removeClass('fixed');
	    		footer.removeClass('hide');
	   		}
	  	});

        var step = -316;

        var $slides = $('.sliderGlance').find('ul');

        var amountSlides = $slides.find('li').length;

        var count = 1;

        var timeInterval = 3000;

        var $markers = $('.sectiobSliderGlance .markerConf');

        var $tips = $('.sectiobSliderGlance .tips');

        var sliderHover = $('.sliderGlance, .sectiobSliderGlance .markerConf, .sectiobSliderGlance .tips');


// autoSlide
        var intervalID;

        function interval(timeInterval){
            intervalID = setInterval(function(){
                upSlider();
            }, timeInterval);
        }

		interval(timeInterval);

        sliderHover.mouseenter(function(e){  //stop
            clearInterval(intervalID);
        });

        sliderHover.mouseout(function(e){  //start

            if(intervalID) {
                clearInterval(intervalID);
            }

            interval(timeInterval);
        });


// click on the arrows

        $('#downSlide').click(function(){ //down Slide
            clearInterval(intervalID);
            downSlider();
            interval(timeInterval);
        });


        $('#upSlide').click(function(){ //up Slide
            clearInterval(intervalID);
            upSlider();
            //interval(timeInterval);
        });


// Markers and tips

// Click to markers
        $markers.click(function(event){

            var thisMark = $(this);


            if(thisMark.hasClass('active')){

                thisMark.removeClass('active');

                $tips.fadeOut(200);

            } else {

                $markers.each(function(){

                    $(this).removeClass('active');

                });

                thisMark.addClass('active');

                var indexThis = thisMark.attr('data-num'); //data-num

                $tips.fadeOut(200);

                $tips.each(function(){

                    var attrDataSlide = $(this).attr('data-slide'); //data-slide

                    var attrDataNum = $(this).attr('data-num'); //data-num'

                    if(attrDataSlide == count && attrDataNum == indexThis) {

                        $(this).fadeIn(600);
                    }

                });

            }

            event.stopPropagation();

        });


// clear
        function closeAll (){
            $tips.fadeOut(200);
            $markers.removeClass('active');
        };

        $('body').click(function(){
            closeAll ();
        });



// Moving Markers (animate)

        function animateMarkers(mark1Top, mark2Top, mark3Top, tip1Top, tip2Top, tip3Top, slidePoint1, slidePoint2) {
            var mark1 = $('.mark1');
            var mark2 = $('.mark2');
            var mark3 = $('.mark3');
            var tip1 = $('.tip1');
            var tip2 = $('.tip2');
            var tip3 = $('.tip3');
            mark1.animate({top: mark1Top}, 400);
            mark2.animate({top: mark2Top}, 400);
            mark3.animate({top: mark3Top}, 400);
            if(count == 1) {
                mark3.fadeIn(1000).animate({top: mark3Top});
            } else {
                mark3.fadeOut(1000);
            }


            tip1.css('top', tip1Top);
            tip2.css('top', tip2Top);
            tip3.css('top', tip3Top);


        };

        function moveMark(){

            var slidePoint1 = $('.slidePoint1');
            var slidePoint2 = $('.slidePoint2');
            //var slidePoint3 = $('.slidePoint3');


            switch  (count) {

                case 1:

                    animateMarkers(63, 128, undefined, 56, 121, undefined);

                    slidePoint1.css({'background-position': '0 -30px'});
                    slidePoint2.css({'background-position': '0 -45px'});
                    //slidePoint3.css({'background-position': '0 -45px'});
                    break;

                case 2:

                    animateMarkers(9, 189, undefined, 2, 182, undefined);

                    slidePoint1.css({'background-position': '0 -45px'});
                    slidePoint2.css({'background-position': '0 -30px'});
                    //slidePoint3.css({'background-position': '0 -45px'});
                    break;
                case 3:

                    animateMarkers(undefined, undefined, 200, undefined, undefined, 200);

                    slidePoint1.css({'background-position': '0 -30px'});
                    slidePoint2.css({'background-position': '0 -45px'});
                    //slidePoint3.css({'background-position': '0 -45px'});
                    break;
            }

        }

//click on the dots of the slider
        $('.wrapperSliderGlance .pointSlider').on('click', function(){

            clearInterval(intervalID);

            count = $(this).data('number');

            closeAll();

            switch (count) {
                case 1:  $slides.animate({top: 0 }, 700); break;
                case 2:  $slides.animate({top: step*(count-1) }, 700); break;
            }
			console.log(count);
            moveMark();

            interval(timeInterval);
        });

        function upSlider() {
            closeAll ();
            if (count < amountSlides) {
                $slides.animate({top: '+=' + step + ''}, 400);
	            console.log({top: '+=' + step + ''});
                count++;
	            console.log(count);
	            moveMark();
            } else {
                $slides.animate({top: 0}, 400);
                count = 1;
	            moveMark();
            }


        }

        function downSlider() {
            closeAll ();


            if (count > 1) {

                $slides.animate({top: '-=' + step + ''}, 400);
                count--;

            } else {

                $slides.animate({top: -316}, 400);
                count = amountSlides;

            }


            moveMark();
        }
    });
</script>